from dataclasses import dataclass
from goat.classes.plugin_base import PluginBase
from .service import TwitterService


@dataclass
class TwitterPluginOptions:
    """Options for the TwitterPlugin."""
    credentials_path: str = "twitter_credentials.yaml"
    product: str = "30day"
    environment: str = "dev"


class TwitterPlugin(PluginBase):
    def __init__(self, options: TwitterPluginOptions):
        twitter_service = TwitterService()
        twitter_service.set_options(options)
        super().__init__("twitter", [twitter_service])
        self.options = options

    def supports_chain(self, chain) -> bool:
        return True


def twitter(options: TwitterPluginOptions = None) -> TwitterPlugin:
    if options is None:
        options = TwitterPluginOptions()
    return TwitterPlugin(options)
